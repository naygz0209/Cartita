<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Para mi bonita üíõ</title>

  <style>
    :root{
      --cream: #fff6d5;
      --cream-2:#ffeaa6;
      --brown:#7a4b2b;
      --shadow: 0 18px 45px rgba(0,0,0,.18);
      --glass: rgba(255,255,255,.55);
    }
    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      height:100vh;
      display:grid;
      place-items:center;
      overflow:hidden;
      background:
        linear-gradient(180deg, rgba(255,246,213,.65), rgba(255,246,213,.65)),
        url("fondo1.jpg") center/cover no-repeat;
    }

    /* capa efectos */
    .fx-layer{ position:fixed; inset:0; pointer-events:none; z-index:1; }

    /* brillo suave */
    .sparkles{
      position:fixed; inset:0;
      pointer-events:none;
      background:
        radial-gradient(circle at 15% 20%, rgba(255,255,255,.35), transparent 35%),
        radial-gradient(circle at 85% 25%, rgba(255,255,255,.25), transparent 40%),
        radial-gradient(circle at 35% 80%, rgba(255,255,255,.25), transparent 35%),
        radial-gradient(circle at 70% 75%, rgba(255,255,255,.2), transparent 40%);
      filter: blur(1px);
      opacity:.9;
      animation: floatGlow 8s ease-in-out infinite;
      z-index:0;
    }
    @keyframes floatGlow{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-10px); }
    }

    .wrap{
      width:min(920px, 92vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:18px;
      padding:22px 16px;
      position:relative;
      z-index:2;
    }

    .title{
      text-align:center;
      color: var(--brown);
      text-shadow: 0 2px 0 rgba(255,255,255,.5);
      user-select:none;
    }
    .title h1{
      margin:0;
      font-size:clamp(28px, 4.2vw, 46px);
      letter-spacing:.5px;
    }
    .title p{
      margin:8px 0 0;
      font-size:clamp(14px, 2vw, 16px);
      opacity:.85;
    }

    .stage{
      width:min(760px, 92vw);
      height:min(440px, 64vh);
      position:relative;
      border-radius:28px;
      background: var(--glass);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.55);
      display:grid;
      place-items:center;
    }

    /* confetti canvas ocupa todo */
    #confettiCanvas{
      position:absolute; inset:0;
      width:100%; height:100%;
      pointer-events:none;
      z-index:1;
    }

    /* decor fondo */
    .confetti-bg{
      position:absolute; inset:-40px;
      background-image:
        radial-gradient(circle, rgba(255,193,7,.55) 2px, transparent 3px),
        radial-gradient(circle, rgba(255,105,180,.35) 2px, transparent 3px),
        radial-gradient(circle, rgba(0,188,212,.25) 2px, transparent 3px);
      background-size: 120px 120px;
      background-position: 0 0, 40px 60px, 70px 10px;
      opacity:.25;
      transform: rotate(6deg);
      pointer-events:none;
      z-index:0;
    }

    .envelope-area{
      width:min(520px, 86vw);
      height:340px;
      position:relative;
      display:grid;
      place-items:center;
      transform: translateY(10px);
      z-index:2;
    }

    .hint{
      position:absolute;
      top:16px;
      font-size:14px;
      color:rgba(122,75,43,.85);
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(255,255,255,.6);
      padding:8px 12px;
      border-radius:999px;
      backdrop-filter: blur(8px);
      user-select:none;
      display:flex;
      gap:8px;
      align-items:center;
      animation: hintPulse 1.8s ease-in-out infinite;
      z-index:10;
    }
    @keyframes hintPulse{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-4px); }
    }

    /* Bot√≥n sonido */
    .sound-toggle{
      position:absolute;
      right:14px;
      top:14px;
      z-index:20;
      border:none;
      cursor:pointer;
      border-radius:999px;
      padding:10px 12px;
      font-weight:800;
      color: var(--brown);
      background: rgba(255,255,255,.65);
      border:1px solid rgba(255,255,255,.75);
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      transition: transform .15s ease;
    }
    .sound-toggle:hover{ transform: translateY(-1px); }
    .sound-toggle:active{ transform: translateY(1px); }

    /* CARTA: ahora sale del sobre */
    .letter{
      position:absolute;
      width:min(460px, 84vw);
      height:280px;
      bottom:46px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.92));
      box-shadow: 0 24px 60px rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.95);
      transform: translateY(150px) scale(.98); /* escondida dentro */
      opacity:0;
      transition:
        transform 1.05s cubic-bezier(.2,.95,.2,1),
        opacity .5s ease;
      padding:18px 18px 16px;
      display:flex;
      flex-direction:column;
      gap:10px;
      z-index:8;
    }

    /* borde ‚Äúpapel‚Äù */
    .letter:before{
      content:"";
      position:absolute;
      left:10px; right:10px; top:10px; bottom:10px;
      border-radius:14px;
      border: 1px dashed rgba(122,75,43,.18);
      pointer-events:none;
    }

    .letter .badge{
      width:fit-content;
      padding:6px 12px;
      border-radius:999px;
      background: rgba(255,234,166,.95);
      border: 1px solid rgba(122,75,43,.18);
      color: var(--brown);
      font-weight:800;
      font-size:13px;
      letter-spacing:.3px;
      z-index:1;
    }

    .letter .content{
      flex:1;
      overflow:auto;
      padding-right:6px;
      color: rgba(70,40,20,.95);
      line-height:1.55;
      font-size:15px;
      z-index:1;
    }
    .letter .content::-webkit-scrollbar{ width:8px; }
    .letter .content::-webkit-scrollbar-thumb{
      background: rgba(122,75,43,.25);
      border-radius:999px;
    }

    .letter .footer{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      opacity:.9;
      font-size:13px;
      color: rgba(122,75,43,.85);
      user-select:none;
      z-index:1;
    }

    .btn{
      cursor:pointer;
      border:none;
      border-radius:999px;
      padding:10px 14px;
      font-weight:800;
      color: var(--brown);
      background: rgba(255,234,166,.97);
      box-shadow: 0 10px 22px rgba(0,0,0,.12);
      transition: transform .15s ease, filter .15s ease;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:active{ transform: translateY(1px); filter: brightness(.98); }

    /* SOBRE */
    .envelope{
      width:min(520px, 86vw);
      height:260px;
      position:absolute;
      bottom:14px;
      cursor:pointer;
      transform-origin: center;
      transition: transform .25s ease;
      user-select:none;
      z-index:6;
    }
    .envelope:hover{ transform: translateY(-2px) scale(1.01); }

    .env-base{
      position:absolute; inset:0;
      border-radius:22px;
      background: linear-gradient(180deg, #ffe8a6, #ffd980);
      box-shadow: 0 18px 40px rgba(0,0,0,.15);
      border: 1px solid rgba(122,75,43,.18);
    }

    .env-flap{
      position:absolute;
      left:0; right:0;
      top:-1px;
      height:58%;
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      background: linear-gradient(180deg, #ffeab8, #ffd88a);
      border-top-left-radius:22px;
      border-top-right-radius:22px;
      transform-origin: 50% 0%;
      transform: rotateX(0deg);
      transition: transform .9s cubic-bezier(.2,.9,.2,1);
      border: 1px solid rgba(122,75,43,.16);
      border-bottom:none;
      z-index:5;
    }

    .env-left{
      position:absolute;
      left:0; top:0; bottom:0;
      width:52%;
      clip-path: polygon(0 0, 100% 50%, 0 100%);
      background: rgba(255,255,255,.18);
      border-radius:22px;
      z-index:3;
    }
    .env-right{
      position:absolute;
      right:0; top:0; bottom:0;
      width:52%;
      clip-path: polygon(100% 0, 0 50%, 100% 100%);
      background: rgba(255,255,255,.10);
      border-radius:22px;
      z-index:3;
    }

    .env-front{
      position:absolute; inset:0;
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 50% 55%);
      border-radius:22px;
      background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
      z-index:4;
      border: 1px solid rgba(122,75,43,.15);
    }

    .seal{
      position:absolute;
      left:50%;
      top:52%;
      transform: translate(-50%,-50%);
      width:72px;
      height:72px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.75), rgba(255,255,255,.25));
      border: 2px solid rgba(122,75,43,.25);
      display:grid;
      place-items:center;
      z-index:6;
      box-shadow: 0 14px 28px rgba(0,0,0,.16);
    }
    .seal span{
      font-size:28px;
      filter: drop-shadow(0 2px 0 rgba(0,0,0,.08));
    }

    /* Animaci√≥n flotante */
    .floaty{ animation: floaty 3.2s ease-in-out infinite; }
    @keyframes floaty{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-6px); }
    }

    /* ESTADO ABIERTO */
    .open .env-flap{ transform: rotateX(175deg); }
    .open .letter{
      opacity:1;
      transform: translateY(-80px) scale(1); /* SALE M√ÅS DEL SOBRE */
    }
    .open .hint{
      opacity:0;
      transform: translateY(-10px);
      transition: opacity .25s ease, transform .25s ease;
    }

    @media (max-width: 520px){
      .stage{ border-radius:22px; }
      .envelope-area{ height:360px; }
      .letter{ height:300px; }
      .hint{ top:14px; font-size:13px; }
    }

    /* ‚ù§Ô∏è Corazones flotantes */
    .heart{
      position:absolute;
      font-size:18px;
      opacity:0;
      will-change: transform, opacity;
      animation: heartFloat linear forwards;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
    }
    @keyframes heartFloat{
      0%{ transform: translate(var(--x, 0), 20px) scale(.85); opacity:0; }
      10%{ opacity:.9; }
      100%{ transform: translate(var(--x, 0), -120px) scale(1.15); opacity:0; }
    }
  </style>
</head>

<body>
  <div class="sparkles"></div>

  <!-- capa para corazones -->
  <div class="fx-layer" id="fxLayer"></div>

  <main class="wrap">
    <header class="title">
      <h1>Para mi bonita üíõ</h1>
      <p>La distancia jamas me impedira demostrarte lo mucho que te quiero</p>
    </header>

    <section class="stage" aria-label="Carta interactiva">
      <div class="confetti-bg"></div>
      <canvas id="confettiCanvas"></canvas>

      <button class="sound-toggle" id="soundToggle" type="button" aria-label="Activar o desactivar sonido">
        üîä Sonido: ON
      </button>

      <!-- ‚úÖ AUDIO MP3 (coloca Quiero.mp3 en la misma carpeta que este HTML) -->
      <audio id="bgMusic" src="Quiero.mp3" preload="auto"></audio>

      <div class="envelope-area" id="scene">
        <div class="hint">‚ú® Dale clic al sobre para abrir la carta</div>

        <!-- Carta -->
        <article class="letter" id="letter">
          <div class="badge">üíå Mi cartita para ti</div>

            
        <!-- Contenido de la carta -->

          <div class="content">
            <div class="content">

  <p>Dicen que San Valent√≠n naci√≥ de personas que cre√≠an en el amor incluso cuando era dif√≠cil expresarlo‚Ä¶ y bueno, quiz√° a veces no s√© c√≥mo expresarme correctamente, as√≠ que quise aprovechar esta ocasi√≥n para expresarte de manera escrita lo que siento por ti.</p>

  <p>Sabes‚Ä¶ hay d√≠as en los que hablo contigo y solo quisiera tenerte junto a m√≠ para poder abrazarte, hacerte cari√±itos o simplemente tomarte de la mano. ¬øLo curioso?‚Ä¶ lo curioso es que odio los abrazos, no me agrada el contacto f√≠sico ni las muestras de afecto que impliquen contacto f√≠sico. Por lo tanto, siento que todo lo que siento contigo es nuevo.</p>

  <p>Sabes‚Ä¶ en un principio me daba mucho miedo, me preguntar√°s ¬øpor qu√©?‚Ä¶ pero el amor siempre me ha dado miedo. Sin embargo, me doy cuenta que contigo todo es nuevo y me agrada. Inclusive me agrada descubrir todas las facetas nuevas que estoy descubriendo contigo.</p>

  <p>Me agrada todo lo que somos, lo que estamos descubriendo. De verdad quiero que esto funcione. S√© que hay muchas cosas y muchos retos que vamos a afrontar, quiz√° la distancia sea una de ellas, pero siempre he sabido que sin importar la distancia esto que siento por ti jam√°s cambiar√°.</p>

  <p>Despu√©s de todo, ahora comprendo que esto del amor se siente tan bien‚Ä¶ y comprendo mucho este sentimiento, o m√°s bien comprendo mucho a la persona de la cual me enamor√© y de la cual me sigo enamorando cada d√≠a.</p>

  <p>Es decir, t√∫ eres muy linda, muy amable, guap√≠sima y atractiva en todos los aspectos. Te preguntar√°s por qu√© en aspectos‚Ä¶ pero de verdad t√∫ eres muy atractiva. Tu manera de pensar tambi√©n lo es. De verdad me encanta cada parte de ti.</p>

  <p>Amo todos los momentos que pasamos juntas, amo la manera en la que hablas de lo que te gusta, amo tus risas, amo todas y cada una de las cosas que haces. Y me gustar√≠a que me permitieras seguirte conociendo y demostrarte lo mucho que te quiero, y que alg√∫n d√≠a seamos una linda pareja.</p>

  <p>Espero cada d√≠a con ansias que llegue el momento donde podamos vernos. Mientras tanto, solo quer√≠a decirte en este peque√±o espacio todo lo que me haces sentir.</p>

  <p><strong>Te quiero demasiado, preciosa üíõ</strong></p>

</div>

           
          </div>

          <div class="footer">
            <span>Con mucho cari√±o üê∂üçÆ</span>
            <button class="btn" id="closeBtn" type="button">Cerrar</button>
          </div>
        </article>

        <!-- Sobre -->
        <div class="envelope floaty" id="envelope" role="button" aria-label="Abrir carta" tabindex="0">
          <div class="env-base"></div>
          <div class="env-left"></div>
          <div class="env-right"></div>
          <div class="env-front"></div>
          <div class="env-flap"></div>
          <div class="seal"><span>üçÆ</span></div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ====== Estado UI ======
    const scene = document.getElementById("scene");
    const envelope = document.getElementById("envelope");
    const closeBtn = document.getElementById("closeBtn");
    const soundToggle = document.getElementById("soundToggle");
    const fxLayer = document.getElementById("fxLayer");

    // ‚úÖ M√∫sica MP3
    const bgMusic = document.getElementById("bgMusic");
    bgMusic.volume = 0.6; // Ajusta volumen (0.0 a 1.0)
    bgMusic.loop = true;  // Opcional: que se repita

    let soundEnabled = true;

    // ====== Corazones flotando ======
    function spawnHeartBurst() {
      // peque√±o burst al abrir
      for (let i = 0; i < 10; i++) spawnHeart(true);
    }

    function spawnHeart(isBurst=false){
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.textContent = "üíõ";

      const stageRect = document.querySelector(".stage").getBoundingClientRect();

      // posici√≥n base: centro del sobre
      const x = stageRect.left + stageRect.width / 2 + (Math.random()*140 - 70);
      const y = stageRect.top + stageRect.height * 0.70 + (Math.random()*30 - 15);

      heart.style.left = (x) + "px";
      heart.style.top  = (y) + "px";

      // movimiento lateral y duraci√≥n
      const drift = (Math.random()*120 - 60);
      heart.style.setProperty("--x", drift + "px");

      const dur = isBurst ? (1.3 + Math.random()*0.7) : (2.2 + Math.random()*1.2);
      heart.style.animationDuration = dur + "s";

      // tama√±o variado
      heart.style.fontSize = (14 + Math.random()*14) + "px";

      fxLayer.appendChild(heart);
      requestAnimationFrame(()=> heart.style.opacity = "1");

      setTimeout(()=> heart.remove(), dur * 1000);
    }

    // corazones suaves constantes
    setInterval(() => {
      // solo algunos para no saturar
      if (Math.random() < 0.55) spawnHeart(false);
    }, 700);

    // ====== Confetti animado (Canvas) ======
    const canvas = document.getElementById("confettiCanvas");
    const ctx = canvas.getContext("2d");

    function resizeCanvas(){
      const rect = canvas.parentElement.getBoundingClientRect();
      canvas.width = Math.floor(rect.width * devicePixelRatio);
      canvas.height = Math.floor(rect.height * devicePixelRatio);
      ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    let confettiPieces = [];
    let confettiRunning = false;

    function makeConfetti(n = 140){
      const rect = canvas.getBoundingClientRect();
      confettiPieces = Array.from({length:n}, () => ({
        x: rect.width/2 + (Math.random()*220 - 110),
        y: rect.height*0.35 + (Math.random()*40 - 20),
        vx: (Math.random()*3 - 1.5),
        vy: (Math.random()*3 + 1.5),
        r: 2 + Math.random()*4,
        a: Math.random()*Math.PI*2,
        va: (Math.random()*0.22 - 0.11),
        life: 120 + Math.random()*80
      }));
    }

    function confettiLoop(){
      if (!confettiRunning) return;
      const rect = canvas.getBoundingClientRect();
      ctx.clearRect(0,0,rect.width,rect.height);

      confettiPieces.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.a += p.va;
        p.vy += 0.03; // gravedad suave
        p.life -= 1;

        // colorcito random sin definir fijo (variaci√≥n con HSL)
        const hue = (p.x + p.y) % 360;
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.a);
        ctx.globalAlpha = Math.max(0, p.life / 180);
        ctx.fillStyle = `hsl(${hue} 85% 70%)`;
        ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.4);
        ctx.restore();
      });

      confettiPieces = confettiPieces.filter(p => p.life > 0 && p.y < rect.height + 40);

      if (confettiPieces.length === 0){
        confettiRunning = false;
        ctx.clearRect(0,0,rect.width,rect.height);
        return;
      }

      requestAnimationFrame(confettiLoop);
    }

    function fireConfetti(){
      resizeCanvas();
      makeConfetti(160);
      confettiRunning = true;
      confettiLoop();
    }

    // ====== Abrir / Cerrar ======
    function openLetter() {
      scene.classList.add("open");
      envelope.classList.remove("floaty");

      // ‚úÖ Reproducir canci√≥n al abrir (por click s√≠ est√° permitido)
      if (soundEnabled) {
        bgMusic.currentTime = 0; // opcional: reinicia desde el inicio
        bgMusic.play().catch(()=>{});
      }

      fireConfetti();
      spawnHeartBurst();
    }

    function closeLetter() {
      scene.classList.remove("open");
      envelope.classList.add("floaty");

      // ‚úÖ Opcional: detener m√∫sica al cerrar
      bgMusic.pause();
    }

    // ‚úÖ Bot√≥n ON/OFF controla la m√∫sica
    soundToggle.addEventListener("click", () => {
      soundEnabled = !soundEnabled;
      soundToggle.textContent = soundEnabled ? "üîä Sonido: ON" : "üîá Sonido: OFF";

      if (!soundEnabled) {
        bgMusic.pause();
      } else {
        if (scene.classList.contains("open")) {
          bgMusic.play().catch(()=>{});
        }
      }
    });

    envelope.addEventListener("click", openLetter);
    closeBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      closeLetter();
    });

    envelope.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        openLetter();
      }
    });

    // Cerrar clic fuera
    document.addEventListener("click", (e) => {
      if (!scene.classList.contains("open")) return;
      const letter = document.getElementById("letter");
      const clickedInside = letter.contains(e.target) || envelope.contains(e.target) || soundToggle.contains(e.target);
      if (!clickedInside) closeLetter();
    });
  </script>
</body>
</html>

